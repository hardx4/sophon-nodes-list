<!doctype html>
<html lang="en">
  <head>
      <meta charset="utf-8">
      <meta name="description" content="alphasec">
      <meta name="author" content="alphasec">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <title>Sophon Nodes List</title>
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
      <link rel="stylesheet" href="/css/styles.css">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:500&display=swap">
      <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <script>
        $(document).ready(function () {
            const apiUrl = "https://monitor.sophon.xyz/nodes";

            // Fazendo a requisição GET
            $.get(apiUrl)
                .done(function (data) {
                    console.log("Dados recebidos da API:", data);

                    // Verifica se existem nodes na resposta
                    if (data.nodes && data.nodes.length > 0) {
                        let nodesContainer = $("#nodes-container");
                        nodesContainer.empty();

                        // Itera sobre os nodes e adiciona cards ao contêiner
                        data.nodes.forEach(node => {
                            nodesContainer.append(
                                `<div class="col-md-4 mb-4">
                                    <div class="card h-100">
                                        <div class="card-body">
                                            <h5 class="card-title">Operator</h5>
                                            <p class="card-text"><strong>ID:</strong> ${node.operator}</p>
                                            <p class="card-text"><strong>Status:</strong> ${node.status ? "Ativo" : "Inativo"}</p>
                                            <p class="card-text"><strong>Rewards:</strong> ${node.rewards}</p>
                                            <p class="card-text"><strong>Fee:</strong> ${node.fee}%</p>
                                            <p class="card-text"><strong>Uptime:</strong> ${node.uptime}%</p>
                                        </div>
                                    </div>
                                </div>`
                            );
                        });
                    } else {
                        $("#nodes-container").html('<p class="text-center">Nenhum nó encontrado.</p>');
                    }
                })
                .fail(function (error) {
                    console.error("Erro ao consumir a API:", error);
                    $("#nodes-container").html('<p class="text-center text-danger">Erro ao carregar os dados.</p>');
                });
        });
    </script>
  </head>
  <body>
    <div class="container mt-5">
        <h1 class="text-center mb-4">Sophon Nodes List</h1>
        <div id="nodes-container" class="row">
            <!-- Lista de nós será exibida aqui -->
        </div>
    </div>
    <div class="row">
      <span class="text-muted small"><a href="https://twitter.com/chibataflix">Parallax</a> © 2024. All rights reserved.</span>
    </div>
  </body>
</html>
